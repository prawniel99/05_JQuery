<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="../css/public.css">
    <script src="../js/jquery-3.7.1.js"></script>

    <script>
        const getData = (url, vdata)=>{
            return new Promise((resolve, reject)=>{
                const xhr = new XMLHttpRequest();
                xhr.open('post', url, true);
                xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
                xhr.send(vdata);
                xhr.onload = () => resolve(xhr.responseText);
                xhr.onerror = () => reject(new Error("오류 발생"));
            })
        }
        // 준비되면. 밑에 id="btn1"을 찾아야하는데, 위에서부터 실행하는거니까 발견 못함. 그래서 준비되면(페이지 로딩 다 끝나면) 이라고 해줘야 하는것.
        // 이게 아주 중요한 개념. 준비 되고 나면! 페이지 로딩 다 되고 나면!
        $(()=>{
            $('#btn1').on('click', ()=>{
                // 입력한 값을 가져온다 - 전송할 데이터를 만든다
                vname = $('#name').val().trim();
                vid = $('#id').val().trim();
                // 두가지 방법
                // vname = document.ff.name.value.trim();
                // vid = document.ff.id.value.trim();

                params = {name : vname, id : vid};

                // getData('ddfdf.jsp', params);
                getData('postTest.jsp', params)
                .then(res=>{
                	return JSON.parse(res);
                })
                .then(data=>{
                	let code = `<p>name: ${data.name}</p>
                	            <p>`;
                })
            })
        })
    </script>
    
    
</head>
<body>
    <div class="box">
        <h1>
        	1. 
        </h1>
        
        <form>
        	이름 <input type="text" name="name" id="name"><br>
        	아이디 <input type="text" name="id" id="id"><br>
        	<input type="button" value="확인" id="btn1">
        </form>
        
        <input type="button" value="confirm" onclick="proc1()">
        <div id="result1"></div>
    </div>
</body>
</html>