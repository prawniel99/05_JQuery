<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <link rel="stylesheet" href="../css/public.css">
    <script src="../js/jquery-3.7.1.js"></script>

	<style>
	
	</style>

	<script>
        const getData = function(url, ph, pb){

            fetch(url, { // jsp에서는 매개변수 하나만 줬는데, post에서는 헤더랑 바디 해야함
                method: 'post',
                headers: ph,
                body: pb
            })
            .then(res=>{
                // 1 way to check if fetch above worked
                console.log(res);

                
                // 2 way to check if fetch above worked
                if(res.ok){
                	return res.json();
                }else{
                	new Error("error: " + res.statusText);
                }
                
            }).then(data=>{
            	// for checking
            	alert(data);
            	
            	// output
            	code = `name: ${data.name}<br>
            			id: ${data.id}<br>
            			email: ${data.email}`;
            	
            	$('#result1').html(code);
            	
            }).catch(err=>{
                alert("error: " + err);
            })
        }

        $(()=>{
            $('#btn1').on('click', ()=>{

                // get input value
                vid = $('#id').val().trim();
                vname = $('#name').val().trim();
                vemail = $('#email').val().trim();

                // header
                fheader = {
                    "Content-type": "application/x-www-form-urlencoded"
                }

                //body: stringify the data to be transmitted
                fbody = "id=" + vid + "&name=" + vname + "&email" + vemail;
                
                getData('params.jsp', fheader, fbody);
                
            })
        })
	</script>

</head>

<body>

    <div class="box">
        <h1>
			1. 
        </h1>

        <form name="ff">
        	<input type="text" placeholder="name" name="name" id="name"><br>
        	<input type="text" placeholder="id" name="id" id="id"><br>
        	<input type="text" placeholder="pw" name="email" id="email"><br>
        	<input type="button" value="params전송" id="btn1">
        	<input type="button" value="직렬화전송" id="btn2">
        </form>
        
        <div id="result1"></div>

    </div>

</body>
</html>